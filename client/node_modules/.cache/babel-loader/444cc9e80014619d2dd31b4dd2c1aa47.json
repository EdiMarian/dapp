{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/ediichim/Documents/workspace/temp/estar dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/ediichim/Documents/workspace/temp/estar dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ContractQueryResponse = exports.ContractResultItem = exports.ContractResults = void 0;\n\nvar bignumber_js_1 = require(\"bignumber.js\");\n\nvar address_1 = require(\"../address\");\n\nvar balance_1 = require(\"../balance\");\n\nvar hash_1 = require(\"../hash\");\n\nvar networkParams_1 = require(\"../networkParams\");\n\nvar nonce_1 = require(\"../nonce\");\n\nvar smartcontracts_1 = require(\"../smartcontracts\");\n\nvar transaction_1 = require(\"../transaction\");\n\nvar ContractResults = /*#__PURE__*/function () {\n  function ContractResults(items) {\n    _classCallCheck(this, ContractResults);\n\n    this.items = items;\n    this.items.sort(function (a, b) {\n      return a.nonce.valueOf() - b.nonce.valueOf();\n    });\n  }\n\n  _createClass(ContractResults, null, [{\n    key: \"empty\",\n    value: function empty() {\n      return new ContractResults([]);\n    }\n  }, {\n    key: \"fromProxyHttpResponse\",\n    value: function fromProxyHttpResponse(results) {\n      var items = results.map(function (item) {\n        return ContractResultItem.fromProxyHttpResponse(item);\n      });\n      return new ContractResults(items);\n    }\n  }, {\n    key: \"fromApiHttpResponse\",\n    value: function fromApiHttpResponse(results) {\n      var items = results.map(function (item) {\n        return ContractResultItem.fromApiHttpResponse(item);\n      });\n      return new ContractResults(items);\n    }\n  }]);\n\n  return ContractResults;\n}();\n\nexports.ContractResults = ContractResults;\n\nvar ContractResultItem = /*#__PURE__*/function () {\n  function ContractResultItem() {\n    _classCallCheck(this, ContractResultItem);\n\n    this.hash = hash_1.Hash.empty();\n    this.nonce = new nonce_1.Nonce(0);\n    this.value = balance_1.Balance.Zero();\n    this.receiver = new address_1.Address();\n    this.sender = new address_1.Address();\n    this.data = \"\";\n    this.previousHash = hash_1.Hash.empty();\n    this.originalHash = hash_1.Hash.empty();\n    this.gasLimit = new networkParams_1.GasLimit(0);\n    this.gasPrice = new networkParams_1.GasPrice(0);\n    this.callType = 0;\n    this.returnMessage = \"\";\n  }\n\n  _createClass(ContractResultItem, [{\n    key: \"getOutputUntyped\",\n    value: function getOutputUntyped() {\n      // TODO: Decide how to parse \"data\" (immediate results vs. other results).\n      throw new Error(\"Method not implemented.\");\n    }\n  }, {\n    key: \"getOutputTyped\",\n    value: function getOutputTyped(_endpointDefinition) {\n      // TODO: Decide how to parse \"data\" (immediate results vs. other results).\n      throw new Error(\"Method not implemented.\");\n    }\n  }], [{\n    key: \"fromProxyHttpResponse\",\n    value: function fromProxyHttpResponse(response) {\n      var item = ContractResultItem.fromHttpResponse(response);\n      return item;\n    }\n  }, {\n    key: \"fromApiHttpResponse\",\n    value: function fromApiHttpResponse(response) {\n      var item = ContractResultItem.fromHttpResponse(response);\n      item.data = Buffer.from(item.data, \"base64\").toString();\n      item.callType = Number(item.callType);\n      return item;\n    }\n  }, {\n    key: \"fromHttpResponse\",\n    value: function fromHttpResponse(response) {\n      var item = new ContractResultItem();\n      item.hash = new transaction_1.TransactionHash(response.hash);\n      item.nonce = new nonce_1.Nonce(response.nonce || 0);\n      item.value = balance_1.Balance.fromString(response.value);\n      item.receiver = new address_1.Address(response.receiver);\n      item.sender = new address_1.Address(response.sender);\n      item.previousHash = new transaction_1.TransactionHash(response.prevTxHash);\n      item.originalHash = new transaction_1.TransactionHash(response.originalTxHash);\n      item.gasLimit = new networkParams_1.GasLimit(response.gasLimit);\n      item.gasPrice = new networkParams_1.GasPrice(response.gasPrice);\n      item.data = response.data || \"\";\n      item.callType = response.callType;\n      item.returnMessage = response.returnMessage;\n      return item;\n    }\n  }]);\n\n  return ContractResultItem;\n}();\n\nexports.ContractResultItem = ContractResultItem;\n\nvar ContractQueryResponse = /*#__PURE__*/function () {\n  function ContractQueryResponse() {\n    _classCallCheck(this, ContractQueryResponse);\n\n    this.returnData = [];\n    this.returnCode = smartcontracts_1.ReturnCode.None;\n    this.returnMessage = \"\";\n    this.gasUsed = new networkParams_1.GasLimit(0);\n  }\n\n  _createClass(ContractQueryResponse, [{\n    key: \"getOutputUntyped\",\n    value: function getOutputUntyped() {\n      var buffers = this.returnData.map(function (item) {\n        return Buffer.from(item || \"\", \"base64\");\n      });\n      return buffers;\n    }\n  }, {\n    key: \"getOutputTyped\",\n    value: function getOutputTyped(endpointDefinition) {\n      var buffers = this.getOutputUntyped();\n      var values = new smartcontracts_1.ArgSerializer().buffersToValues(buffers, endpointDefinition.output);\n      return values;\n    }\n  }], [{\n    key: \"fromHttpResponse\",\n    value: function fromHttpResponse(payload) {\n      var response = new ContractQueryResponse();\n      var gasRemaining = new bignumber_js_1.BigNumber(payload[\"gasRemaining\"] || payload[\"GasRemaining\"] || 0);\n      response.returnData = payload[\"returnData\"] || [];\n      response.returnCode = payload[\"returnCode\"] || \"\";\n      response.returnMessage = payload[\"returnMessage\"] || \"\";\n      response.gasUsed = new networkParams_1.GasLimit(smartcontracts_1.MaxUint64.minus(gasRemaining).toNumber());\n      return response;\n    }\n  }]);\n\n  return ContractQueryResponse;\n}();\n\nexports.ContractQueryResponse = ContractQueryResponse;","map":{"version":3,"sources":["../../src/networkProvider/contractResults.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContractQueryResponse = exports.ContractResultItem = exports.ContractResults = void 0;\nconst bignumber_js_1 = require(\"bignumber.js\");\nconst address_1 = require(\"../address\");\nconst balance_1 = require(\"../balance\");\nconst hash_1 = require(\"../hash\");\nconst networkParams_1 = require(\"../networkParams\");\nconst nonce_1 = require(\"../nonce\");\nconst smartcontracts_1 = require(\"../smartcontracts\");\nconst transaction_1 = require(\"../transaction\");\nclass ContractResults {\n    constructor(items) {\n        this.items = items;\n        this.items.sort(function (a, b) {\n            return a.nonce.valueOf() - b.nonce.valueOf();\n        });\n    }\n    static empty() {\n        return new ContractResults([]);\n    }\n    static fromProxyHttpResponse(results) {\n        let items = results.map(item => ContractResultItem.fromProxyHttpResponse(item));\n        return new ContractResults(items);\n    }\n    static fromApiHttpResponse(results) {\n        let items = results.map(item => ContractResultItem.fromApiHttpResponse(item));\n        return new ContractResults(items);\n    }\n}\nexports.ContractResults = ContractResults;\nclass ContractResultItem {\n    constructor() {\n        this.hash = hash_1.Hash.empty();\n        this.nonce = new nonce_1.Nonce(0);\n        this.value = balance_1.Balance.Zero();\n        this.receiver = new address_1.Address();\n        this.sender = new address_1.Address();\n        this.data = \"\";\n        this.previousHash = hash_1.Hash.empty();\n        this.originalHash = hash_1.Hash.empty();\n        this.gasLimit = new networkParams_1.GasLimit(0);\n        this.gasPrice = new networkParams_1.GasPrice(0);\n        this.callType = 0;\n        this.returnMessage = \"\";\n    }\n    static fromProxyHttpResponse(response) {\n        let item = ContractResultItem.fromHttpResponse(response);\n        return item;\n    }\n    static fromApiHttpResponse(response) {\n        let item = ContractResultItem.fromHttpResponse(response);\n        item.data = Buffer.from(item.data, \"base64\").toString();\n        item.callType = Number(item.callType);\n        return item;\n    }\n    static fromHttpResponse(response) {\n        let item = new ContractResultItem();\n        item.hash = new transaction_1.TransactionHash(response.hash);\n        item.nonce = new nonce_1.Nonce(response.nonce || 0);\n        item.value = balance_1.Balance.fromString(response.value);\n        item.receiver = new address_1.Address(response.receiver);\n        item.sender = new address_1.Address(response.sender);\n        item.previousHash = new transaction_1.TransactionHash(response.prevTxHash);\n        item.originalHash = new transaction_1.TransactionHash(response.originalTxHash);\n        item.gasLimit = new networkParams_1.GasLimit(response.gasLimit);\n        item.gasPrice = new networkParams_1.GasPrice(response.gasPrice);\n        item.data = response.data || \"\";\n        item.callType = response.callType;\n        item.returnMessage = response.returnMessage;\n        return item;\n    }\n    getOutputUntyped() {\n        // TODO: Decide how to parse \"data\" (immediate results vs. other results).\n        throw new Error(\"Method not implemented.\");\n    }\n    getOutputTyped(_endpointDefinition) {\n        // TODO: Decide how to parse \"data\" (immediate results vs. other results).\n        throw new Error(\"Method not implemented.\");\n    }\n}\nexports.ContractResultItem = ContractResultItem;\nclass ContractQueryResponse {\n    constructor() {\n        this.returnData = [];\n        this.returnCode = smartcontracts_1.ReturnCode.None;\n        this.returnMessage = \"\";\n        this.gasUsed = new networkParams_1.GasLimit(0);\n    }\n    static fromHttpResponse(payload) {\n        let response = new ContractQueryResponse();\n        let gasRemaining = new bignumber_js_1.BigNumber(payload[\"gasRemaining\"] || payload[\"GasRemaining\"] || 0);\n        response.returnData = payload[\"returnData\"] || [];\n        response.returnCode = payload[\"returnCode\"] || \"\";\n        response.returnMessage = payload[\"returnMessage\"] || \"\";\n        response.gasUsed = new networkParams_1.GasLimit(smartcontracts_1.MaxUint64.minus(gasRemaining).toNumber());\n        return response;\n    }\n    getOutputUntyped() {\n        let buffers = this.returnData.map((item) => Buffer.from(item || \"\", \"base64\"));\n        return buffers;\n    }\n    getOutputTyped(endpointDefinition) {\n        let buffers = this.getOutputUntyped();\n        let values = new smartcontracts_1.ArgSerializer().buffersToValues(buffers, endpointDefinition.output);\n        return values;\n    }\n}\nexports.ContractQueryResponse = ContractQueryResponse;\n//# sourceMappingURL=contractResults.js.map"]},"metadata":{},"sourceType":"script"}