{"ast":null,"code":"\"use strict\";\n\nvar _assertThisInitialized = require(\"/Users/ediichim/Documents/workspace/temp/estar dapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/ediichim/Documents/workspace/temp/estar dapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/ediichim/Documents/workspace/temp/estar dapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _classCallCheck = require(\"/Users/ediichim/Documents/workspace/temp/estar dapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/ediichim/Documents/workspace/temp/estar dapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TypedResult = exports.SmartContractResultItem = exports.SmartContractResults = void 0;\n\nvar address_1 = require(\"../address\");\n\nvar balance_1 = require(\"../balance\");\n\nvar hash_1 = require(\"../hash\");\n\nvar networkParams_1 = require(\"../networkParams\");\n\nvar nonce_1 = require(\"../nonce\");\n\nvar transaction_1 = require(\"../transaction\");\n\nvar argSerializer_1 = require(\"./argSerializer\");\n\nvar returnCode_1 = require(\"./returnCode\");\n\nvar result_1 = require(\"./result\");\n\nvar SmartContractResults = /*#__PURE__*/function () {\n  function SmartContractResults(items) {\n    _classCallCheck(this, SmartContractResults);\n\n    this.items = [];\n    this.immediate = new TypedResult();\n    this.resultingCalls = [];\n    this.items = items;\n\n    if (this.items.length > 0) {\n      var immediateResult = this.findImmediateResult();\n\n      if (immediateResult) {\n        this.immediate = immediateResult;\n      }\n\n      this.resultingCalls = this.findResultingCalls();\n    }\n  }\n\n  _createClass(SmartContractResults, [{\n    key: \"findImmediateResult\",\n    value: function findImmediateResult() {\n      var immediateItem = this.items.filter(function (item) {\n        return isImmediateResult(item);\n      })[0];\n\n      if (immediateItem) {\n        return new TypedResult(immediateItem);\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"findResultingCalls\",\n    value: function findResultingCalls() {\n      var otherItems = this.items.filter(function (item) {\n        return !isImmediateResult(item);\n      });\n      var resultingCalls = otherItems.map(function (item) {\n        return new TypedResult(item);\n      });\n      return resultingCalls;\n    }\n  }, {\n    key: \"getImmediate\",\n    value: function getImmediate() {\n      return this.immediate;\n    }\n  }, {\n    key: \"getResultingCalls\",\n    value: function getResultingCalls() {\n      return this.resultingCalls;\n    }\n  }, {\n    key: \"getAllResults\",\n    value: function getAllResults() {\n      return this.items.map(function (item) {\n        return new TypedResult(item);\n      });\n    }\n  }], [{\n    key: \"empty\",\n    value: function empty() {\n      return new SmartContractResults([]);\n    }\n  }, {\n    key: \"fromHttpResponse\",\n    value: function fromHttpResponse(smartContractResults) {\n      var items = (smartContractResults || []).map(function (item) {\n        return SmartContractResultItem.fromHttpResponse(item);\n      });\n      return new SmartContractResults(items);\n    }\n  }]);\n\n  return SmartContractResults;\n}();\n\nexports.SmartContractResults = SmartContractResults;\n\nfunction isImmediateResult(item) {\n  return item.nonce.valueOf() != 0;\n}\n\nvar SmartContractResultItem = /*#__PURE__*/function () {\n  function SmartContractResultItem() {\n    _classCallCheck(this, SmartContractResultItem);\n\n    this.hash = hash_1.Hash.empty();\n    this.nonce = new nonce_1.Nonce(0);\n    this.value = balance_1.Balance.Zero();\n    this.receiver = new address_1.Address();\n    this.sender = new address_1.Address();\n    this.data = \"\";\n    this.previousHash = hash_1.Hash.empty();\n    this.originalHash = hash_1.Hash.empty();\n    this.gasLimit = new networkParams_1.GasLimit(0);\n    this.gasPrice = new networkParams_1.GasPrice(0);\n    this.callType = 0;\n    this.returnMessage = \"\";\n  }\n\n  _createClass(SmartContractResultItem, [{\n    key: \"getDataTokens\",\n    value: function getDataTokens() {\n      return new argSerializer_1.ArgSerializer().stringToBuffers(this.data);\n    }\n  }], [{\n    key: \"fromHttpResponse\",\n    value: function fromHttpResponse(response) {\n      var item = new SmartContractResultItem();\n      item.hash = new transaction_1.TransactionHash(response.hash);\n      item.nonce = new nonce_1.Nonce(response.nonce || 0);\n      item.value = balance_1.Balance.fromString(response.value);\n      item.receiver = new address_1.Address(response.receiver);\n      item.sender = new address_1.Address(response.sender);\n      item.data = response.data || \"\";\n      item.previousHash = new transaction_1.TransactionHash(response.prevTxHash);\n      item.originalHash = new transaction_1.TransactionHash(response.originalTxHash);\n      item.gasLimit = new networkParams_1.GasLimit(response.gasLimit);\n      item.gasPrice = new networkParams_1.GasPrice(response.gasPrice);\n      item.callType = response.callType;\n      item.returnMessage = response.returnMessage;\n      return item;\n    }\n  }]);\n\n  return SmartContractResultItem;\n}();\n\nexports.SmartContractResultItem = SmartContractResultItem;\n\nvar TypedResult = /*#__PURE__*/function (_SmartContractResultI) {\n  _inherits(TypedResult, _SmartContractResultI);\n\n  var _super = _createSuper(TypedResult);\n\n  function TypedResult(init) {\n    var _this;\n\n    _classCallCheck(this, TypedResult);\n\n    _this = _super.call(this);\n    Object.assign(_assertThisInitialized(_this), init);\n    return _this;\n  }\n\n  _createClass(TypedResult, [{\n    key: \"assertSuccess\",\n    value: function assertSuccess() {\n      result_1.Result.assertSuccess(this);\n    }\n  }, {\n    key: \"isSuccess\",\n    value: function isSuccess() {\n      return this.getReturnCode().isSuccess();\n    }\n  }, {\n    key: \"getReturnCode\",\n    value: function getReturnCode() {\n      var tokens = this.getDataTokens();\n\n      if (tokens.length < 2) {\n        return returnCode_1.ReturnCode.None;\n      }\n\n      var returnCodeToken = tokens[1];\n      return returnCode_1.ReturnCode.fromBuffer(returnCodeToken);\n    }\n  }, {\n    key: \"outputUntyped\",\n    value: function outputUntyped() {\n      this.assertSuccess(); // Skip the first 2 SCRs (eg. the @6f6b from @6f6b@2b).\n\n      return this.getDataTokens().slice(2);\n    }\n  }, {\n    key: \"setEndpointDefinition\",\n    value: function setEndpointDefinition(endpointDefinition) {\n      this.endpointDefinition = endpointDefinition;\n    }\n  }, {\n    key: \"getEndpointDefinition\",\n    value: function getEndpointDefinition() {\n      return this.endpointDefinition;\n    }\n  }, {\n    key: \"getReturnMessage\",\n    value: function getReturnMessage() {\n      return this.returnMessage;\n    }\n  }, {\n    key: \"outputTyped\",\n    value: function outputTyped() {\n      return result_1.Result.outputTyped(this);\n    }\n  }, {\n    key: \"unpackOutput\",\n    value: function unpackOutput() {\n      return result_1.Result.unpackOutput(this);\n    }\n  }]);\n\n  return TypedResult;\n}(SmartContractResultItem);\n\nexports.TypedResult = TypedResult;","map":{"version":3,"sources":["../../src/smartcontracts/smartContractResults.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypedResult = exports.SmartContractResultItem = exports.SmartContractResults = void 0;\nconst address_1 = require(\"../address\");\nconst balance_1 = require(\"../balance\");\nconst hash_1 = require(\"../hash\");\nconst networkParams_1 = require(\"../networkParams\");\nconst nonce_1 = require(\"../nonce\");\nconst transaction_1 = require(\"../transaction\");\nconst argSerializer_1 = require(\"./argSerializer\");\nconst returnCode_1 = require(\"./returnCode\");\nconst result_1 = require(\"./result\");\nclass SmartContractResults {\n    constructor(items) {\n        this.items = [];\n        this.immediate = new TypedResult();\n        this.resultingCalls = [];\n        this.items = items;\n        if (this.items.length > 0) {\n            let immediateResult = this.findImmediateResult();\n            if (immediateResult) {\n                this.immediate = immediateResult;\n            }\n            this.resultingCalls = this.findResultingCalls();\n        }\n    }\n    static empty() {\n        return new SmartContractResults([]);\n    }\n    static fromHttpResponse(smartContractResults) {\n        let items = (smartContractResults || []).map((item) => SmartContractResultItem.fromHttpResponse(item));\n        return new SmartContractResults(items);\n    }\n    findImmediateResult() {\n        let immediateItem = this.items.filter(item => isImmediateResult(item))[0];\n        if (immediateItem) {\n            return new TypedResult(immediateItem);\n        }\n        return undefined;\n    }\n    findResultingCalls() {\n        let otherItems = this.items.filter(item => !isImmediateResult(item));\n        let resultingCalls = otherItems.map(item => new TypedResult(item));\n        return resultingCalls;\n    }\n    getImmediate() {\n        return this.immediate;\n    }\n    getResultingCalls() {\n        return this.resultingCalls;\n    }\n    getAllResults() {\n        return this.items.map(item => new TypedResult(item));\n    }\n}\nexports.SmartContractResults = SmartContractResults;\nfunction isImmediateResult(item) {\n    return item.nonce.valueOf() != 0;\n}\nclass SmartContractResultItem {\n    constructor() {\n        this.hash = hash_1.Hash.empty();\n        this.nonce = new nonce_1.Nonce(0);\n        this.value = balance_1.Balance.Zero();\n        this.receiver = new address_1.Address();\n        this.sender = new address_1.Address();\n        this.data = \"\";\n        this.previousHash = hash_1.Hash.empty();\n        this.originalHash = hash_1.Hash.empty();\n        this.gasLimit = new networkParams_1.GasLimit(0);\n        this.gasPrice = new networkParams_1.GasPrice(0);\n        this.callType = 0;\n        this.returnMessage = \"\";\n    }\n    static fromHttpResponse(response) {\n        let item = new SmartContractResultItem();\n        item.hash = new transaction_1.TransactionHash(response.hash);\n        item.nonce = new nonce_1.Nonce(response.nonce || 0);\n        item.value = balance_1.Balance.fromString(response.value);\n        item.receiver = new address_1.Address(response.receiver);\n        item.sender = new address_1.Address(response.sender);\n        item.data = response.data || \"\";\n        item.previousHash = new transaction_1.TransactionHash(response.prevTxHash);\n        item.originalHash = new transaction_1.TransactionHash(response.originalTxHash);\n        item.gasLimit = new networkParams_1.GasLimit(response.gasLimit);\n        item.gasPrice = new networkParams_1.GasPrice(response.gasPrice);\n        item.callType = response.callType;\n        item.returnMessage = response.returnMessage;\n        return item;\n    }\n    getDataTokens() {\n        return new argSerializer_1.ArgSerializer().stringToBuffers(this.data);\n    }\n}\nexports.SmartContractResultItem = SmartContractResultItem;\nclass TypedResult extends SmartContractResultItem {\n    constructor(init) {\n        super();\n        Object.assign(this, init);\n    }\n    assertSuccess() {\n        result_1.Result.assertSuccess(this);\n    }\n    isSuccess() {\n        return this.getReturnCode().isSuccess();\n    }\n    getReturnCode() {\n        let tokens = this.getDataTokens();\n        if (tokens.length < 2) {\n            return returnCode_1.ReturnCode.None;\n        }\n        let returnCodeToken = tokens[1];\n        return returnCode_1.ReturnCode.fromBuffer(returnCodeToken);\n    }\n    outputUntyped() {\n        this.assertSuccess();\n        // Skip the first 2 SCRs (eg. the @6f6b from @6f6b@2b).\n        return this.getDataTokens().slice(2);\n    }\n    setEndpointDefinition(endpointDefinition) {\n        this.endpointDefinition = endpointDefinition;\n    }\n    getEndpointDefinition() {\n        return this.endpointDefinition;\n    }\n    getReturnMessage() {\n        return this.returnMessage;\n    }\n    outputTyped() {\n        return result_1.Result.outputTyped(this);\n    }\n    unpackOutput() {\n        return result_1.Result.unpackOutput(this);\n    }\n}\nexports.TypedResult = TypedResult;\n//# sourceMappingURL=smartContractResults.js.map"]},"metadata":{},"sourceType":"script"}