{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ediichim/Documents/workspace/temp/delegation-dashboard.elrond.com/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ediichim/Documents/workspace/temp/delegation-dashboard.elrond.com/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ediichim/Documents/workspace/temp/delegation-dashboard.elrond.com/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from'react';import{useState,useEffect}from'react';import{useGlobalContext}from'context';import modifiable from'helpers/modifiable';import useTransaction from'helpers/useTransaction';import styles from'./styles.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Switch=function Switch(_ref){var transaction=_ref.transaction,name=_ref.name;var _useGlobalContext=useGlobalContext(),contractDetails=_useGlobalContext.contractDetails;var _useTransaction=useTransaction(),sendTransaction=_useTransaction.sendTransaction;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),disabled=_useState2[0],setDisabled=_useState2[1];var _useState3=useState(contractDetails.data?contractDetails.data[name]==='ON':false),_useState4=_slicedToArray(_useState3,2),checked=_useState4[0],setChecked=_useState4[1];var _onChange=function onChange(type){setDisabled(true);setChecked(!checked);try{setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return sendTransaction({args:Buffer.from(\"\".concat(!checked)).toString('hex'),value:'0',type:type});case 2:setDisabled(false);case 3:case\"end\":return _context.stop();}}},_callee);})),200);}catch(error){console.error(error);}};var trackContractDetails=function trackContractDetails(){if(contractDetails.data){setChecked(contractDetails.data[name]==='ON');}};useEffect(trackContractDetails,[contractDetails.data]);return/*#__PURE__*/_jsxs(\"label\",{className:modifiable('switch',[disabled&&'disabled'],styles),children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(){return _onChange(transaction);},type:\"checkbox\",name:name,className:styles.input,defaultChecked:checked}),/*#__PURE__*/_jsxs(\"span\",{className:modifiable('slider',[checked&&'right'],styles),children:[/*#__PURE__*/_jsx(\"span\",{className:modifiable('label',[!checked&&'active'],styles),children:\"OFF\"}),/*#__PURE__*/_jsx(\"span\",{className:modifiable('label',[checked&&'active'],styles),children:\"ON\"})]})]});};export default Switch;","map":{"version":3,"sources":["/Users/ediichim/Documents/workspace/temp/delegation-dashboard.elrond.com/src/components/Toggles/components/Switch/index.tsx"],"names":["React","useState","useEffect","useGlobalContext","modifiable","useTransaction","styles","Switch","transaction","name","contractDetails","sendTransaction","disabled","setDisabled","data","checked","setChecked","onChange","type","setTimeout","args","Buffer","from","toString","value","error","console","trackContractDetails","input"],"mappings":"0jBAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CAEA,OAASC,gBAAT,KAAiC,SAAjC,CACA,MAAOC,CAAAA,UAAP,KAAuB,oBAAvB,CACA,MAAOC,CAAAA,cAAP,KAA2B,wBAA3B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,C,wFAOA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,MAAuC,IAApCC,CAAAA,WAAoC,MAApCA,WAAoC,CAAvBC,IAAuB,MAAvBA,IAAuB,CACpD,sBAA4BN,gBAAgB,EAA5C,CAAQO,eAAR,mBAAQA,eAAR,CACA,oBAA4BL,cAAc,EAA1C,CAAQM,eAAR,iBAAQA,eAAR,CAEA,cAAgCV,QAAQ,CAAU,KAAV,CAAxC,wCAAOW,QAAP,eAAiBC,WAAjB,eACA,eAA8BZ,QAAQ,CACpCS,eAAe,CAACI,IAAhB,CAAuBJ,eAAe,CAACI,IAAhB,CAAqBL,IAArB,IAA+B,IAAtD,CAA6D,KADzB,CAAtC,yCAAOM,OAAP,eAAgBC,UAAhB,eAIA,GAAMC,CAAAA,SAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,IAAD,CAAwB,CACvCL,WAAW,CAAC,IAAD,CAAX,CACAG,UAAU,CAAC,CAACD,OAAF,CAAV,CAEA,GAAI,CACFI,UAAU,sEAAC,yJACHR,CAAAA,eAAe,CAAC,CACpBS,IAAI,CAAEC,MAAM,CAACC,IAAP,WAAe,CAACP,OAAhB,GAA2BQ,QAA3B,CAAoC,KAApC,CADc,CAEpBC,KAAK,CAAE,GAFa,CAGpBN,IAAI,CAAJA,IAHoB,CAAD,CADZ,QAOTL,WAAW,CAAC,KAAD,CAAX,CAPS,sDAAD,GAQP,GARO,CAAV,CASD,CAAC,MAAOY,KAAP,CAAc,CACdC,OAAO,CAACD,KAAR,CAAcA,KAAd,EACD,CACF,CAjBD,CAmBA,GAAME,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACjC,GAAIjB,eAAe,CAACI,IAApB,CAA0B,CACxBE,UAAU,CAACN,eAAe,CAACI,IAAhB,CAAqBL,IAArB,IAA+B,IAAhC,CAAV,CACD,CACF,CAJD,CAMAP,SAAS,CAACyB,oBAAD,CAAuB,CAACjB,eAAe,CAACI,IAAjB,CAAvB,CAAT,CAEA,mBACE,eAAO,SAAS,CAAEV,UAAU,CAAC,QAAD,CAAW,CAACQ,QAAQ,EAAI,UAAb,CAAX,CAAqCN,MAArC,CAA5B,wBACE,cACE,QAAQ,CAAE,0BAAMW,CAAAA,SAAQ,CAACT,WAAD,CAAd,EADZ,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAEC,IAHR,CAIE,SAAS,CAAEH,MAAM,CAACsB,KAJpB,CAKE,cAAc,CAAEb,OALlB,EADF,cASE,cAAM,SAAS,CAAEX,UAAU,CAAC,QAAD,CAAW,CAACW,OAAO,EAAI,OAAZ,CAAX,CAAiCT,MAAjC,CAA3B,wBACE,aAAM,SAAS,CAAEF,UAAU,CAAC,OAAD,CAAU,CAAC,CAACW,OAAD,EAAY,QAAb,CAAV,CAAkCT,MAAlC,CAA3B,iBADF,cAKE,aAAM,SAAS,CAAEF,UAAU,CAAC,OAAD,CAAU,CAACW,OAAO,EAAI,QAAZ,CAAV,CAAiCT,MAAjC,CAA3B,gBALF,GATF,GADF,CAqBD,CAzDD,CA2DA,cAAeC,CAAAA,MAAf","sourcesContent":["import * as React from 'react';\nimport { useState, useEffect } from 'react';\n\nimport { useGlobalContext } from 'context';\nimport modifiable from 'helpers/modifiable';\nimport useTransaction from 'helpers/useTransaction';\n\nimport styles from './styles.module.scss';\n\ninterface ToggleType {\n  transaction: string;\n  name: string;\n}\n\nconst Switch = ({ transaction, name }: ToggleType) => {\n  const { contractDetails } = useGlobalContext();\n  const { sendTransaction } = useTransaction();\n\n  const [disabled, setDisabled] = useState<boolean>(false);\n  const [checked, setChecked] = useState<boolean>(\n    contractDetails.data ? contractDetails.data[name] === 'ON' : false\n  );\n\n  const onChange = (type: string): void => {\n    setDisabled(true);\n    setChecked(!checked);\n\n    try {\n      setTimeout(async (): Promise<void> => {\n        await sendTransaction({\n          args: Buffer.from(`${!checked}`).toString('hex'),\n          value: '0',\n          type\n        });\n\n        setDisabled(false);\n      }, 200);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const trackContractDetails = () => {\n    if (contractDetails.data) {\n      setChecked(contractDetails.data[name] === 'ON');\n    }\n  };\n\n  useEffect(trackContractDetails, [contractDetails.data]);\n\n  return (\n    <label className={modifiable('switch', [disabled && 'disabled'], styles)}>\n      <input\n        onChange={() => onChange(transaction)}\n        type='checkbox'\n        name={name}\n        className={styles.input}\n        defaultChecked={checked}\n      />\n\n      <span className={modifiable('slider', [checked && 'right'], styles)}>\n        <span className={modifiable('label', [!checked && 'active'], styles)}>\n          OFF\n        </span>\n\n        <span className={modifiable('label', [checked && 'active'], styles)}>\n          ON\n        </span>\n      </span>\n    </label>\n  );\n};\n\nexport default Switch;\n"]},"metadata":{},"sourceType":"module"}