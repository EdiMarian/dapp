{"ast":null,"code":"var _jsxFileName = \"/Users/ediichim/Documents/workspace/temp/estar dapp/src/components/Withdrawals/components/Withdrawal/index.tsx\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport { useState, useEffect } from 'react';\nimport { faMinus } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Logo from 'assets/Logo';\nimport { network } from 'config';\nimport modifiable from 'helpers/modifiable';\nimport useTransaction from 'helpers/useTransaction';\nimport styles from './styles.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Withdrawal = ({\n  value,\n  timeLeft\n}) => {\n  _s();\n\n  const [counter, setCounter] = useState(timeLeft - moment().unix());\n  const [fiat, setFiat] = useState('');\n  const {\n    sendTransaction\n  } = useTransaction();\n\n  const getTimeLeft = () => {\n    const duration = moment.duration(counter, 'seconds');\n    const formatters = {\n      d: [duration.asDays(), Math.floor(duration.asDays())],\n      h: [duration.asHours(), 'H'],\n      m: [duration.asMinutes(), 'm'],\n      s: [duration.asSeconds(), 's']\n    };\n    const format = Object.keys(formatters).reduce((total, key) => {\n      const [time, label] = formatters[key];\n\n      if (Math.floor(time) > 0) {\n        return total === '' ? `${label}[${key}]` : `${total} : ${label}[${key}]`;\n      }\n\n      return total;\n    }, '');\n    return moment.utc(moment.duration(counter, 'seconds').asMilliseconds()).format(format);\n  };\n\n  const onWithdraw = async () => {\n    try {\n      await sendTransaction({\n        args: '',\n        type: 'withdraw',\n        value: '0'\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const fetchFiat = () => {\n    const source = axios.CancelToken.source();\n\n    const fetchData = async () => {\n      try {\n        const pairs = await axios.get('https://api.elrond.com/mex-pairs', {\n          cancelToken: source.token\n        });\n        const token = pairs.data.find(item => item.baseId === 'WEGLD-bd4d79');\n        const amount = parseFloat(value.replace(',', '')) * token.basePrice;\n        setFiat(Number(amount.toFixed(2)).toLocaleString());\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          return;\n        }\n      }\n    };\n\n    fetchData();\n    return () => {\n      setFiat('');\n      source.cancel();\n    };\n  };\n\n  const handleCounter = () => {\n    const interval = setInterval(() => setCounter(timer => timer - 1), 1000);\n    return () => {\n      clearInterval(interval);\n      setCounter(timeLeft - moment().unix());\n    };\n  };\n\n  useEffect(handleCounter, []);\n  useEffect(fetchFiat, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.withdrawal,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.left,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.icon,\n        children: /*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.data,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.value,\n          children: [value, \" \", network.egldLabel]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.amount,\n          children: [\"$\", fiat]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.right,\n      children: [counter > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.time,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.date,\n          children: getTimeLeft()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.label,\n          children: \"Wait Time Left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onWithdraw,\n        className: modifiable('withdraw', [counter > 0 && 'disabled'], styles),\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faMinus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Withdraw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), counter > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: modifiable('time', ['mobile'], styles),\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.date,\n        children: getTimeLeft()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.label,\n        children: \"Wait Time Left\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Withdrawal, \"mQt6v9Vu2sAKhhW5PV26tv2EsEc=\", false, function () {\n  return [useTransaction];\n});\n\n_c = Withdrawal;\nexport default Withdrawal;\n\nvar _c;\n\n$RefreshReg$(_c, \"Withdrawal\");","map":{"version":3,"sources":["/Users/ediichim/Documents/workspace/temp/estar dapp/src/components/Withdrawals/components/Withdrawal/index.tsx"],"names":["React","useState","useEffect","faMinus","FontAwesomeIcon","axios","moment","Logo","network","modifiable","useTransaction","styles","Withdrawal","value","timeLeft","counter","setCounter","unix","fiat","setFiat","sendTransaction","getTimeLeft","duration","formatters","d","asDays","Math","floor","h","asHours","m","asMinutes","s","asSeconds","format","Object","keys","reduce","total","key","time","label","utc","asMilliseconds","onWithdraw","args","type","error","console","fetchFiat","source","CancelToken","fetchData","pairs","get","cancelToken","token","data","find","item","baseId","amount","parseFloat","replace","basePrice","Number","toFixed","toLocaleString","isCancel","cancel","handleCounter","interval","setInterval","timer","clearInterval","withdrawal","left","icon","egldLabel","right","date"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useState, useEffect } from 'react';\n\nimport { faMinus } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport axios from 'axios';\n\nimport moment from 'moment';\nimport Logo from 'assets/Logo';\nimport { network } from 'config';\nimport { UndelegateStakeListType } from 'context/state';\nimport modifiable from 'helpers/modifiable';\nimport useTransaction from 'helpers/useTransaction';\n\nimport styles from './styles.module.scss';\n\ninterface FormattersType {\n  [key: string]: any;\n  d: Array<string | number>;\n  h: Array<string | number>;\n  m: Array<string | number>;\n  s: Array<string | number>;\n}\n\nconst Withdrawal: React.FC<UndelegateStakeListType> = ({ value, timeLeft }) => {\n  const [counter, setCounter] = useState<number>(timeLeft - moment().unix());\n  const [fiat, setFiat] = useState<string>('');\n  const { sendTransaction } = useTransaction();\n\n  const getTimeLeft = (): string => {\n    const duration = moment.duration(counter, 'seconds');\n    const formatters: FormattersType = {\n      d: [duration.asDays(), Math.floor(duration.asDays())],\n      h: [duration.asHours(), 'H'],\n      m: [duration.asMinutes(), 'm'],\n      s: [duration.asSeconds(), 's']\n    };\n\n    const format = Object.keys(formatters).reduce((total, key) => {\n      const [time, label] = formatters[key];\n\n      if (Math.floor(time) > 0) {\n        return total === ''\n          ? `${label}[${key}]`\n          : `${total} : ${label}[${key}]`;\n      }\n\n      return total;\n    }, '');\n\n    return moment\n      .utc(moment.duration(counter, 'seconds').asMilliseconds())\n      .format(format);\n  };\n\n  const onWithdraw = async (): Promise<void> => {\n    try {\n      await sendTransaction({\n        args: '',\n        type: 'withdraw',\n        value: '0'\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const fetchFiat = () => {\n    const source = axios.CancelToken.source();\n\n    const fetchData = async () => {\n      try {\n        const pairs = await axios.get('https://api.elrond.com/mex-pairs', {\n          cancelToken: source.token\n        });\n\n        const token = pairs.data.find(\n          (item: any) => item.baseId === 'WEGLD-bd4d79'\n        );\n\n        const amount = parseFloat(value.replace(',', '')) * token.basePrice;\n\n        setFiat(Number(amount.toFixed(2)).toLocaleString());\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          return;\n        }\n      }\n    };\n\n    fetchData();\n\n    return () => {\n      setFiat('');\n      source.cancel();\n    };\n  };\n\n  const handleCounter = () => {\n    const interval = setInterval(() => setCounter((timer) => timer - 1), 1000);\n\n    return () => {\n      clearInterval(interval);\n      setCounter(timeLeft - moment().unix());\n    };\n  };\n\n  useEffect(handleCounter, []);\n  useEffect(fetchFiat, []);\n\n  return (\n    <div className={styles.withdrawal}>\n      <div className={styles.left}>\n        <span className={styles.icon}>\n          <Logo />\n        </span>\n\n        <div className={styles.data}>\n          <span className={styles.value}>\n            {value} {network.egldLabel}\n          </span>\n\n          <span className={styles.amount}>${fiat}</span>\n        </div>\n      </div>\n      <div className={styles.right}>\n        {counter > 0 && (\n          <div className={styles.time}>\n            <span className={styles.date}>{getTimeLeft()}</span>\n            <span className={styles.label}>Wait Time Left</span>\n          </div>\n        )}\n\n        <button\n          onClick={onWithdraw}\n          className={modifiable(\n            'withdraw',\n            [counter > 0 && 'disabled'],\n            styles\n          )}\n        >\n          <FontAwesomeIcon icon={faMinus} /> <span>Withdraw</span>\n        </button>\n      </div>\n\n      {counter > 0 && (\n        <div className={modifiable('time', ['mobile'], styles)}>\n          <span className={styles.date}>{getTimeLeft()}</span>\n          <span className={styles.label}>Wait Time Left</span>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Withdrawal;\n"]},"metadata":{},"sourceType":"module"}