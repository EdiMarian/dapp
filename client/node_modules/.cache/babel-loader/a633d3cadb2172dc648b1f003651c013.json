{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/ediichim/Documents/workspace/temp/estar dapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/ediichim/Documents/workspace/temp/estar dapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/ediichim/Documents/workspace/temp/estar dapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TokenOfAccountOnNetwork = exports.AccountOnNetwork = exports.Account = void 0;\n\nvar address_1 = require(\"./address\");\n\nvar nonce_1 = require(\"./nonce\");\n\nvar balance_1 = require(\"./balance\");\n\nvar balanceBuilder_1 = require(\"./balanceBuilder\");\n\nvar bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\n/**\n * An abstraction representing an account (user or Smart Contract) on the Network.\n */\n\n\nvar Account = /*#__PURE__*/function () {\n  /**\n   * Creates an account object from an address\n   */\n  function Account(address) {\n    _classCallCheck(this, Account);\n\n    /**\n     * The address of the account.\n     */\n    this.address = new address_1.Address();\n    /**\n     * The nonce of the account (the account sequence number).\n     */\n\n    this.nonce = new nonce_1.Nonce(0);\n    /**\n     * The balance of the account.\n     */\n\n    this.balance = balanceBuilder_1.Egld(\"0\");\n    this.asOnNetwork = new AccountOnNetwork();\n    this.address = address;\n  }\n  /**\n   * Queries the details of the account on the Network\n   * @param provider the Network provider\n   * @param cacheLocally whether to save the query response within the object, locally\n   */\n\n\n  _createClass(Account, [{\n    key: \"getAsOnNetwork\",\n    value: function getAsOnNetwork(provider) {\n      var cacheLocally = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.address.assertNotEmpty();\n                _context.next = 3;\n                return provider.getAccount(this.address);\n\n              case 3:\n                response = _context.sent;\n\n                if (cacheLocally) {\n                  this.asOnNetwork = response;\n                }\n\n                return _context.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n    /**\n     * Gets a previously saved query response\n     */\n\n  }, {\n    key: \"getAsOnNetworkCached\",\n    value: function getAsOnNetworkCached() {\n      return this.asOnNetwork;\n    }\n    /**\n     * Synchronizes account properties (such as nonce, balance) with the ones queried from the Network\n     * @param provider the Network provider\n     */\n\n  }, {\n    key: \"sync\",\n    value: function sync(provider) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.getAsOnNetwork(provider, true);\n\n              case 2:\n                this.nonce = this.asOnNetwork.nonce;\n                this.balance = this.asOnNetwork.balance;\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n    /**\n     * Increments (locally) the nonce (the account sequence number).\n     */\n\n  }, {\n    key: \"incrementNonce\",\n    value: function incrementNonce() {\n      this.nonce = this.nonce.increment();\n    }\n    /**\n     * Gets then increments (locally) the nonce (the account sequence number).\n     */\n\n  }, {\n    key: \"getNonceThenIncrement\",\n    value: function getNonceThenIncrement() {\n      var nonce = this.nonce;\n      this.nonce = this.nonce.increment();\n      return nonce;\n    }\n    /**\n     * Converts the account to a pretty, plain JavaScript object.\n     */\n\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        address: this.address.bech32(),\n        nonce: this.nonce.valueOf(),\n        balance: this.balance.toString()\n      };\n    }\n  }]);\n\n  return Account;\n}();\n\nexports.Account = Account;\n/**\n * A plain view of an account, as queried from the Network.\n */\n\nvar AccountOnNetwork = /*#__PURE__*/function () {\n  function AccountOnNetwork(init) {\n    _classCallCheck(this, AccountOnNetwork);\n\n    this.address = new address_1.Address();\n    this.nonce = new nonce_1.Nonce(0);\n    this.balance = balanceBuilder_1.Egld(0);\n    this.code = \"\";\n    this.userName = \"\";\n    Object.assign(this, init);\n  }\n\n  _createClass(AccountOnNetwork, null, [{\n    key: \"fromHttpResponse\",\n    value: function fromHttpResponse(payload) {\n      var result = new AccountOnNetwork();\n      result.address = new address_1.Address(payload[\"address\"] || 0);\n      result.nonce = new nonce_1.Nonce(payload[\"nonce\"] || 0);\n      result.balance = balance_1.Balance.fromString(payload[\"balance\"] || \"0\");\n      result.code = payload[\"code\"] || \"\";\n      result.userName = payload[\"username\"] || \"\";\n      return result;\n    }\n  }]);\n\n  return AccountOnNetwork;\n}();\n\nexports.AccountOnNetwork = AccountOnNetwork;\n\nvar TokenOfAccountOnNetwork = /*#__PURE__*/function () {\n  function TokenOfAccountOnNetwork() {\n    _classCallCheck(this, TokenOfAccountOnNetwork);\n\n    this.tokenIdentifier = \"\";\n    this.attributes = Buffer.from([]);\n    this.balance = new bignumber_js_1.default(0);\n    this.nonce = new nonce_1.Nonce(0);\n    this.creator = new address_1.Address(\"\");\n    this.royalties = new bignumber_js_1.default(0);\n  }\n\n  _createClass(TokenOfAccountOnNetwork, null, [{\n    key: \"fromHttpResponse\",\n    value: function fromHttpResponse(payload) {\n      var result = new TokenOfAccountOnNetwork();\n      result.tokenIdentifier = payload.tokenIdentifier;\n      result.attributes = Buffer.from(payload.attributes || \"\", \"base64\");\n      result.balance = new bignumber_js_1.default(payload.balance || 0);\n      result.nonce = new nonce_1.Nonce(payload.nonce || 0);\n      result.creator = new address_1.Address(payload.creator || \"\");\n      result.royalties = new bignumber_js_1.default(payload.royalties || 0);\n      return result;\n    }\n  }]);\n\n  return TokenOfAccountOnNetwork;\n}();\n\nexports.TokenOfAccountOnNetwork = TokenOfAccountOnNetwork;","map":{"version":3,"sources":["../src/account.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,IAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,IAAA,gBAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;;AACA,IAAA,cAAA,GAAA,eAAA,CAAA,OAAA,CAAA,cAAA,CAAA,CAAA;AAEA;;AAEG;;;IACU,O;AAkBT;;AAEG;AACH,mBAAY,OAAZ,EAA4B;AAAA;;AApB5B;;AAEG;AACM,SAAA,OAAA,GAAmB,IAAI,SAAA,CAAA,OAAJ,EAAnB;AAET;;AAEG;;AACH,SAAA,KAAA,GAAe,IAAI,OAAA,CAAA,KAAJ,CAAU,CAAV,CAAf;AAEA;;AAEG;;AACH,SAAA,OAAA,GAAmB,gBAAA,CAAA,IAAA,CAAK,GAAL,CAAnB;AAEQ,SAAA,WAAA,GAAgC,IAAI,gBAAJ,EAAhC;AAMJ,SAAK,OAAL,GAAe,OAAf;AACH;AAED;;;;AAIG;;;;;WACG,wBAAe,QAAf,EAAgE;AAAA,UAA5B,YAA4B,uEAAJ,IAAI;;;;;;;AAClE,qBAAK,OAAL,CAAa,cAAb;;AAEe,uBAAM,QAAQ,CAAC,UAAT,CAAoB,KAAK,OAAzB,CAAN;;;AAAX,gBAAA,Q;;AAEJ,oBAAI,YAAJ,EAAkB;AACd,uBAAK,WAAL,GAAmB,QAAnB;AACH;;iDAEM,Q;;;;;;;;;AACV;AAED;;AAEG;;;;WACH,gCAAoB;AAChB,aAAO,KAAK,WAAZ;AACH;AAED;;;AAGG;;;;WACG,cAAK,QAAL,EAAwB;;;;;;;AAC1B,uBAAM,KAAK,cAAL,CAAoB,QAApB,EAA8B,IAA9B,CAAN;;;AACA,qBAAK,KAAL,GAAa,KAAK,WAAL,CAAiB,KAA9B;AACA,qBAAK,OAAL,GAAe,KAAK,WAAL,CAAiB,OAAhC;;;;;;;;;AACH;AAED;;AAEG;;;;WACH,0BAAc;AACV,WAAK,KAAL,GAAa,KAAK,KAAL,CAAW,SAAX,EAAb;AACH;AAED;;AAEG;;;;WACH,iCAAqB;AACjB,UAAI,KAAK,GAAG,KAAK,KAAjB;AACA,WAAK,KAAL,GAAa,KAAK,KAAL,CAAW,SAAX,EAAb;AACA,aAAO,KAAP;AACH;AAED;;AAEG;;;;WACH,kBAAM;AACF,aAAO;AACH,QAAA,OAAO,EAAE,KAAK,OAAL,CAAa,MAAb,EADN;AAEH,QAAA,KAAK,EAAE,KAAK,KAAL,CAAW,OAAX,EAFJ;AAGH,QAAA,OAAO,EAAE,KAAK,OAAL,CAAa,QAAb;AAHN,OAAP;AAKH;;;;;;AApFL,OAAA,CAAA,OAAA,GAAA,OAAA;AAuFA;;AAEG;;IACU,gB;AAOT,4BAAY,IAAZ,EAA4C;AAAA;;AAN5C,SAAA,OAAA,GAAmB,IAAI,SAAA,CAAA,OAAJ,EAAnB;AACA,SAAA,KAAA,GAAe,IAAI,OAAA,CAAA,KAAJ,CAAU,CAAV,CAAf;AACA,SAAA,OAAA,GAAmB,gBAAA,CAAA,IAAA,CAAK,CAAL,CAAnB;AACA,SAAA,IAAA,GAAe,EAAf;AACA,SAAA,QAAA,GAAmB,EAAnB;AAGI,IAAA,MAAM,CAAC,MAAP,CAAc,IAAd,EAAoB,IAApB;AACH;;;;WAED,0BAAwB,OAAxB,EAAoC;AAChC,UAAI,MAAM,GAAG,IAAI,gBAAJ,EAAb;AAEA,MAAA,MAAM,CAAC,OAAP,GAAiB,IAAI,SAAA,CAAA,OAAJ,CAAY,OAAO,CAAC,SAAD,CAAP,IAAsB,CAAlC,CAAjB;AACA,MAAA,MAAM,CAAC,KAAP,GAAe,IAAI,OAAA,CAAA,KAAJ,CAAU,OAAO,CAAC,OAAD,CAAP,IAAoB,CAA9B,CAAf;AACA,MAAA,MAAM,CAAC,OAAP,GAAiB,SAAA,CAAA,OAAA,CAAQ,UAAR,CAAmB,OAAO,CAAC,SAAD,CAAP,IAAsB,GAAzC,CAAjB;AACA,MAAA,MAAM,CAAC,IAAP,GAAc,OAAO,CAAC,MAAD,CAAP,IAAmB,EAAjC;AACA,MAAA,MAAM,CAAC,QAAP,GAAkB,OAAO,CAAC,UAAD,CAAP,IAAuB,EAAzC;AAEA,aAAO,MAAP;AACH;;;;;;AArBL,OAAA,CAAA,gBAAA,GAAA,gBAAA;;IAwBa,uB;AAAb,qCAAA;AAAA;;AACI,SAAA,eAAA,GAA0B,EAA1B;AACA,SAAA,UAAA,GAAqB,MAAM,CAAC,IAAP,CAAY,EAAZ,CAArB;AACA,SAAA,OAAA,GAAqB,IAAI,cAAA,CAAA,OAAJ,CAAc,CAAd,CAArB;AACA,SAAA,KAAA,GAAe,IAAI,OAAA,CAAA,KAAJ,CAAU,CAAV,CAAf;AACA,SAAA,OAAA,GAAmB,IAAI,SAAA,CAAA,OAAJ,CAAY,EAAZ,CAAnB;AACA,SAAA,SAAA,GAAuB,IAAI,cAAA,CAAA,OAAJ,CAAc,CAAd,CAAvB;AAcH;;;;WAZG,0BAAwB,OAAxB,EAAoC;AAChC,UAAI,MAAM,GAAG,IAAI,uBAAJ,EAAb;AAEA,MAAA,MAAM,CAAC,eAAP,GAAyB,OAAO,CAAC,eAAjC;AACA,MAAA,MAAM,CAAC,UAAP,GAAoB,MAAM,CAAC,IAAP,CAAY,OAAO,CAAC,UAAR,IAAsB,EAAlC,EAAsC,QAAtC,CAApB;AACA,MAAA,MAAM,CAAC,OAAP,GAAiB,IAAI,cAAA,CAAA,OAAJ,CAAc,OAAO,CAAC,OAAR,IAAmB,CAAjC,CAAjB;AACA,MAAA,MAAM,CAAC,KAAP,GAAe,IAAI,OAAA,CAAA,KAAJ,CAAU,OAAO,CAAC,KAAR,IAAiB,CAA3B,CAAf;AACA,MAAA,MAAM,CAAC,OAAP,GAAiB,IAAI,SAAA,CAAA,OAAJ,CAAY,OAAO,CAAC,OAAR,IAAmB,EAA/B,CAAjB;AACA,MAAA,MAAM,CAAC,SAAP,GAAmB,IAAI,cAAA,CAAA,OAAJ,CAAc,OAAO,CAAC,SAAR,IAAqB,CAAnC,CAAnB;AAEA,aAAO,MAAP;AACH;;;;;;AAnBL,OAAA,CAAA,uBAAA,GAAA,uBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TokenOfAccountOnNetwork = exports.AccountOnNetwork = exports.Account = void 0;\nconst address_1 = require(\"./address\");\nconst nonce_1 = require(\"./nonce\");\nconst balance_1 = require(\"./balance\");\nconst balanceBuilder_1 = require(\"./balanceBuilder\");\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\n/**\n * An abstraction representing an account (user or Smart Contract) on the Network.\n */\nclass Account {\n    /**\n     * Creates an account object from an address\n     */\n    constructor(address) {\n        /**\n         * The address of the account.\n         */\n        this.address = new address_1.Address();\n        /**\n         * The nonce of the account (the account sequence number).\n         */\n        this.nonce = new nonce_1.Nonce(0);\n        /**\n         * The balance of the account.\n         */\n        this.balance = balanceBuilder_1.Egld(\"0\");\n        this.asOnNetwork = new AccountOnNetwork();\n        this.address = address;\n    }\n    /**\n     * Queries the details of the account on the Network\n     * @param provider the Network provider\n     * @param cacheLocally whether to save the query response within the object, locally\n     */\n    getAsOnNetwork(provider, cacheLocally = true) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.address.assertNotEmpty();\n            let response = yield provider.getAccount(this.address);\n            if (cacheLocally) {\n                this.asOnNetwork = response;\n            }\n            return response;\n        });\n    }\n    /**\n     * Gets a previously saved query response\n     */\n    getAsOnNetworkCached() {\n        return this.asOnNetwork;\n    }\n    /**\n     * Synchronizes account properties (such as nonce, balance) with the ones queried from the Network\n     * @param provider the Network provider\n     */\n    sync(provider) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getAsOnNetwork(provider, true);\n            this.nonce = this.asOnNetwork.nonce;\n            this.balance = this.asOnNetwork.balance;\n        });\n    }\n    /**\n     * Increments (locally) the nonce (the account sequence number).\n     */\n    incrementNonce() {\n        this.nonce = this.nonce.increment();\n    }\n    /**\n     * Gets then increments (locally) the nonce (the account sequence number).\n     */\n    getNonceThenIncrement() {\n        let nonce = this.nonce;\n        this.nonce = this.nonce.increment();\n        return nonce;\n    }\n    /**\n     * Converts the account to a pretty, plain JavaScript object.\n     */\n    toJSON() {\n        return {\n            address: this.address.bech32(),\n            nonce: this.nonce.valueOf(),\n            balance: this.balance.toString(),\n        };\n    }\n}\nexports.Account = Account;\n/**\n * A plain view of an account, as queried from the Network.\n */\nclass AccountOnNetwork {\n    constructor(init) {\n        this.address = new address_1.Address();\n        this.nonce = new nonce_1.Nonce(0);\n        this.balance = balanceBuilder_1.Egld(0);\n        this.code = \"\";\n        this.userName = \"\";\n        Object.assign(this, init);\n    }\n    static fromHttpResponse(payload) {\n        let result = new AccountOnNetwork();\n        result.address = new address_1.Address(payload[\"address\"] || 0);\n        result.nonce = new nonce_1.Nonce(payload[\"nonce\"] || 0);\n        result.balance = balance_1.Balance.fromString(payload[\"balance\"] || \"0\");\n        result.code = payload[\"code\"] || \"\";\n        result.userName = payload[\"username\"] || \"\";\n        return result;\n    }\n}\nexports.AccountOnNetwork = AccountOnNetwork;\nclass TokenOfAccountOnNetwork {\n    constructor() {\n        this.tokenIdentifier = \"\";\n        this.attributes = Buffer.from([]);\n        this.balance = new bignumber_js_1.default(0);\n        this.nonce = new nonce_1.Nonce(0);\n        this.creator = new address_1.Address(\"\");\n        this.royalties = new bignumber_js_1.default(0);\n    }\n    static fromHttpResponse(payload) {\n        let result = new TokenOfAccountOnNetwork();\n        result.tokenIdentifier = payload.tokenIdentifier;\n        result.attributes = Buffer.from(payload.attributes || \"\", \"base64\");\n        result.balance = new bignumber_js_1.default(payload.balance || 0);\n        result.nonce = new nonce_1.Nonce(payload.nonce || 0);\n        result.creator = new address_1.Address(payload.creator || \"\");\n        result.royalties = new bignumber_js_1.default(payload.royalties || 0);\n        return result;\n    }\n}\nexports.TokenOfAccountOnNetwork = TokenOfAccountOnNetwork;\n//# sourceMappingURL=account.js.map"]},"metadata":{},"sourceType":"script"}